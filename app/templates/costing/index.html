{% extends "base.html" %}
{% block title %}ÎšÎ¿ÏƒÏ„Î¿Î»Î¿Î³Î®ÏƒÎµÎ¹Ï‚ | Gelato ERP{% endblock %}
{% block content %}

<h2 class="mb-4">ğŸ§¾ ÎšÎ¿ÏƒÏ„Î¿Î»Î¿Î³Î®ÏƒÎµÎ¹Ï‚ Î ÏÎ¿ÏŠÏŒÎ½Ï„Ï‰Î½</h2>

<a href="{{ url_for('costing.add_costing') }}" class="btn btn-success mb-4">â• ÎÎ­Î± ÎšÎ¿ÏƒÏ„Î¿Î»ÏŒÎ³Î·ÏƒÎ·</a>

<div class="table-responsive">
    <table class="table table-bordered table-hover bg-white shadow-sm">
        <thead class="table-light">
            <tr>
                <th>Î ÏÎ¿ÏŠÏŒÎ½</th>
                <th>Î¥Î»Î¹ÎºÏŒ</th>
                <th>Î Î¿ÏƒÏŒÏ„Î·Ï„Î± Î¥Î»Î¹ÎºÎ¿Ï</th>
                <th>ÎœÎ¿Î½Î¬Î´Î±</th>
                <th>Î‘Ï€ÏŒÎ´Î¿ÏƒÎ·</th>
                <th>ÎœÎ¿Î½Î¬Î´ÎµÏ‚ Î ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚</th>
                <th>ÎšÏŒÏƒÏ„Î¿Ï‚/ÎœÎ¿Î½Î¬Î´Î± (â‚¬)</th>
                <th style="width: 180px;">Î•Î½Î­ÏÎ³ÎµÎ¹ÎµÏ‚</th>
            </tr>
        </thead>
        <tbody>
            {% for c in costings %}
            <tr>
                <td>{{ c.product.name }}</td>
                <td>{{ c.material.name }}</td>
                <td>{{ "{:,.2f}".format(c.quantity) }}</td>
                <td>{{ c.material.unit }}</td>
                <td>{{ c.unit_yield or 1 }}</td>
                <td>{{ "{:,.2f}".format(c.unit_yield or 1) }}</td>
                <td>
                    {% if c.unit_yield %}
                        {{ "{:,.2f}".format((c.material.cost or 0) * c.quantity / c.unit_yield) }}
                    {% else %}
                        {{ "{:,.2f}".format((c.material.cost or 0) * c.quantity) }}
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('costing.edit_costing', costing_id=c.id) }}" class="btn btn-sm btn-warning">Î•Ï€ÎµÎ¾ÎµÏÎ³Î±ÏƒÎ¯Î±</a>
                    <form method="POST" action="{{ url_for('costing.delete_costing', costing_id=c.id) }}"
                          style="display:inline;" onsubmit="return confirm('Î•Î¯ÏƒÎ±Î¹ ÏƒÎ¯Î³Î¿Ï…ÏÎ¿Ï‚;');">
                        <button type="submit" class="btn btn-sm btn-danger">Î”Î¹Î±Î³ÏÎ±Ï†Î®</button>
                    </form>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="8" class="text-center text-muted">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÎºÎ¿ÏƒÏ„Î¿Î»Î¿Î³Î®ÏƒÎµÎ¹Ï‚.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}